/**
 * aiot-capabilities.js — Capabilities Section (S5)
 *
 * AUTO-GENERATED by scaffold-builder.js — review and customize before pushing.
 * Source: aiot.html line 1377
 *
// NOTE: Contains inline SVGs — may need Base64 JS injection if wp_kses strips elements.
 * styles.css: 7 base, 1 hover, 0 pseudo, 0 hidden
 * Original classes: capabilities-section, capabilities-header, capabilities-grid, capability-card, capability-icon (+2 more)
 */

const base = require('../../lib/templates/_base');
const superD = require('../../lib/super-d');

const P = 'cap'; // CSS prefix — customize if needed

// ════════════════════════════════════════════════════════════════
// BLOCKS
// ════════════════════════════════════════════════════════════════
function blocks() {
  const html = `
    <div class="capabilities-section">
    <div class="capabilities-header" style="position: relative; z-index: 2;">
                <h2>Smart Factory Capabilities</h2>
                <p>Complete visibility from machine signal to business insight</p>
            </div>
            <div class="capabilities-grid" style="position: relative; z-index: 2;">
                <div class="capability-card">
                    <div class="capability-icon">
                        <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M12 2v6m0 8v6M6 12H2m20 0h-4"/><circle cx="12" cy="12" r="4"/><path d="M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/></svg>
                    </div>
                    <h3>Universal Machine Connectivity</h3>
                    <p>Connect any machine, any protocol, any age. Our edge devices speak every language your factory uses.</p>
                    <div class="capability-features">
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>PLC integration</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>CNC/SMT machines</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Sensor networks</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Legacy equipment</span>
                        </div>
                    </div>
                </div>
                <div class="capability-card">
                    <div class="capability-icon">
                        <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M18 20V10M12 20V4M6 20v-6"/></svg>
                    </div>
                    <h3>Real-Time OEE</h3>
                    <p>Automatic OEE calculation from machine signals. See availability, performance, and quality without manual input.</p>
                    <div class="capability-features">
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Auto downtime tracking</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Cycle time analysis</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Quality correlation</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Shift comparisons</span>
                        </div>
                    </div>
                </div>
                <div class="capability-card">
                    <div class="capability-icon">
                        <svg aria-hidden="true" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/></svg>
                    </div>
                    <h3>Predictive Maintenance</h3>
                    <p>AI models learn your machine behavior and predict failures before they happen. Fix it before it breaks.</p>
                    <div class="capability-features">
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Vibration analysis</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Temperature trending</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Anomaly detection</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Auto work orders</span>
                        </div>
                    </div>
                </div>
                <div class="capability-card">
                    <div class="capability-icon">
                        <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    </div>
                    <h3>Energy Management</h3>
                    <p>Monitor consumption by machine, line, and product. Identify waste, optimize costs, meet sustainability targets.</p>
                    <div class="capability-features">
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Real-time monitoring</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Cost per unit</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Peak demand alerts</span>
                        </div>
                        <div class="capability-feature">
                            <svg aria-hidden="true" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>
                            <span>Carbon footprint</span>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    `;

  return base.wrapInDiviSection('Capabilities', html, 'Capabilities: Content');
}

// ════════════════════════════════════════════════════════════════
// CSS
// ════════════════════════════════════════════════════════════════
function css() {
  return `
/* === CAPABILITIES (S5) === */
/* TODO: Review and remap class selectors to use ${P} prefix */
/* TODO: Add section container: .capabilities-section{...;${base.fontSmoothingReset(P)}font-size:16px} */
.capabilities-section {
            padding: 100px 0;
            background: #fff;
        }
.capabilities-header {
            text-align: center;
            max-width: 700px;
            margin: 0 auto 60px;
            padding: 0 24px;
        }
.capabilities-header h2 {
            font-family: 'Noto Sans', sans-serif;
            font-size: 36px;
            color: #000864;
            margin-bottom: 16px;
        }
.capabilities-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 32px;
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 24px;
        }
.capability-card {
            background: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            padding: 40px;
            transition: all 0.3s ease;
        }
.capability-card:hover {
            border-color: #00AFF0;
            box-shadow: 0 12px 40px rgba(0, 175, 240, 0.15);
        }
.capability-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, rgba(0, 175, 240, 0.15), rgba(0, 175, 240, 0.05));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
            transition: all 0.4s ease;
        }
.capability-icon svg {
            width: 32px;
            height: 32px;
            stroke: #00AFF0;
            stroke-width: 1.5;
            fill: none;
        }
.capability-card:hover .capability-icon {
            background: linear-gradient(135deg, #00AFF0, #003CC8);
        }
.capability-card:hover .capability-icon svg {
            stroke: #fff;
        }
.capability-card h3 {
            font-family: 'Noto Sans', sans-serif;
            font-size: 22px;
            color: #000864;
            margin-bottom: 12px;
        }
.capability-card > p {
            font-size: 15px;
            color: #5b6b80;
            line-height: 1.6;
            margin-bottom: 24px;
        }
.capability-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
.capability-feature {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #475569;
        }
.capability-feature svg {
            width: 16px;
            height: 16px;
            color: #0369a1;
            flex-shrink: 0;
        }
@media (max-width: 1024px) {
            .aiot-hero-grid { grid-template-columns: 1fr; gap: 40px; }
            .aiot-hero-content { text-align: center; }
            .aiot-sensor-dashboard { max-width: 400px; margin: 0 auto; }
            .aiot-hero h1 { font-size: 40px; }
            .aiot-hero-stats { gap: 40px; justify-content: center; }
            .problem-grid { grid-template-columns: repeat(2, 1fr); }
            .dataflow-stages { flex-wrap: wrap; }
            .dataflow-stage:not(:last-child)::after { display: none; }
            .capabilities-grid { grid-template-columns: 1fr; }
            .metrics-grid { grid-template-columns: repeat(2, 1fr); }
        }
@media (max-width: 640px) {
            .aiot-hero { padding: 120px 0 80px; }
            .aiot-hero h1 { font-size: 32px; }
            .aiot-hero-subtitle { font-size: 17px; }
            .aiot-hero-stats { flex-direction: column; gap: 24px; }
            .aiot-hero-stat-value { font-size: 36px; }
            .problem-grid { grid-template-columns: 1fr; }
            .dataflow-stages { flex-direction: column; }
            .capability-features { grid-template-columns: 1fr; }
            .metrics-grid { grid-template-columns: 1fr; }
            .integration-diagram { flex-direction: column; }
            .integration-arrow { transform: rotate(90deg); }
        }
@media (prefers-reduced-motion: reduce) {
            .aiot-live-dot,
            .problem-card,
            .problem-icon,
            .capability-card,
            .capability-icon,
            .integration-node,
            .integration-link,
            .dw-d-bg,
            .dw-d-parallax,
            .dw-wave-flow,
            .dw-d-glow {
                animation: none !important;
                transition: none !important;
            }
        }

/* === HOVER STATES (auto-ported from styles.css) === */
.capability-card:hover{border-color:#00AFF0;box-shadow:0 8px 24px rgba(0, 175, 240, 0.1)}
.capabilities-section{padding:80px 0;background:#F5F7FA}
.capabilities-grid{display:grid;grid-template-columns:repeat(4, 1fr);gap:24px}
.capability-card{text-align:center;padding:32px 24px;background:#ffffff;border-radius:16px;border:1px solid #e8eef3;transition:all 0.3s ease}
.capability-icon{width:64px;height:64px;background:linear-gradient(135deg, rgba(0, 175, 240, 0.1), rgba(0, 175, 240, 0.05));border-radius:16px;display:flex;align-items:center;justify-content:center;margin:0 auto 16px}
.capability-icon svg{width:28px;height:28px;stroke:#00AFF0;stroke-width:1.5;fill:none}
@media (max-width:1024px){.capabilities-grid{grid-template-columns:repeat(2, 1fr)}}
@media (max-width:640px){.section-title{font-size:28px}.capabilities-grid{grid-template-columns:1fr;max-width:360px;margin-left:auto;margin-right:auto}.product-detail-cta-title{font-size:28px}.product-detail-cta-buttons{flex-direction:column}.product-detail-cta-buttons .btn-white,.product-detail-cta-buttons .btn-outline-white{width:100%;text-align:center}}

\
/* Defensive SVG sizing */
svg:not([width]):not([class]){max-width:48px;max-height:48px}
${base.reducedMotion('')}

/* Super D decoration */
${superD.css('dw-d-bg', { variant: 'outline', position: 'right', modifiers: ['glow'] })}
`.trim();
}

module.exports = { blocks, css };
