/**
 * wms-problems.js — Problems Section (S3)
 *
 * AUTO-GENERATED by scaffold-builder.js — review and customize before pushing.
 * Source: wms.html line 1351
 *
// NOTE: Contains inline SVGs — may need Base64 JS injection if wp_kses strips elements.
 * styles.css: 6 base, 0 hover, 0 pseudo, 0 hidden
 * Original classes: problems-section, dw-section-scene, problems-inner, section-header, section-title (+7 more)
 */

const base = require('../../lib/templates/_base');
const superD = require('../../lib/super-d');

const P = 'pro'; // CSS prefix — customize if needed

// ════════════════════════════════════════════════════════════════
// BLOCKS
// ════════════════════════════════════════════════════════════════
function blocks() {
  const html = `
    <div class="problems-section">
    <div class="dw-section-scene">
                <svg aria-hidden="true" viewBox="0 0 1400 900" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
                    <line x1="200" y1="150" x2="200" y2="750" stroke="#000864" stroke-width="2" opacity="0.12"/>
                    <line x1="400" y1="150" x2="400" y2="750" stroke="#000864" stroke-width="2" opacity="0.12"/>
                    <line x1="150" y1="250" x2="450" y2="250" stroke="#000864" stroke-width="1.5" opacity="0.1"/>
                    <line x1="150" y1="400" x2="450" y2="400" stroke="#000864" stroke-width="1.5" opacity="0.1"/>
                    <line x1="150" y1="550" x2="450" y2="550" stroke="#000864" stroke-width="1.5" opacity="0.1"/>
                    <rect x="220" y="200" width="30" height="45" rx="2" fill="#000864" opacity="0.12"/>
                    <rect x="260" y="210" width="30" height="35" rx="2" stroke="#000864" stroke-width="1" fill="none" stroke-dasharray="3 2" opacity="0.15"/>
                    <rect x="220" y="350" width="30" height="45" rx="2" stroke="#000864" stroke-width="1" fill="none" stroke-dasharray="3 2" opacity="0.15"/>
                    <rect x="260" y="355" width="30" height="40" rx="2" fill="#000864" opacity="0.12"/>
                    <rect x="310" y="360" width="30" height="35" rx="2" fill="#000864" opacity="0.1"/>
                    <rect x="220" y="500" width="30" height="45" rx="2" fill="#000864" opacity="0.1"/>
                    <text x="280" y="670" font-family="'Noto Sans',sans-serif" font-size="14" font-weight="700" fill="#000864" opacity="0.08">SYS: 100</text>
                    <text x="280" y="700" font-family="'Noto Sans',sans-serif" font-size="14" font-weight="700" fill="#00AFF0" opacity="0.12">REAL: 47</text>
                    <text x="420" y="685" font-family="'Noto Sans',sans-serif" font-size="28" font-weight="800" fill="#000864" opacity="0.08">&ne;</text>
                    <rect x="800" y="250" width="60" height="35" rx="3" stroke="#000864" stroke-width="1.5" fill="none" opacity="0.12"/>
                    <line x1="810" y1="260" x2="815" y2="260" stroke="#000864" stroke-width="4" opacity="0.15"/>
                    <line x1="820" y1="260" x2="822" y2="260" stroke="#000864" stroke-width="4" opacity="0.15"/>
                    <line x1="826" y1="260" x2="830" y2="260" stroke="#000864" stroke-width="4" opacity="0.12"/>
                    <line x1="834" y1="260" x2="836" y2="260" stroke="#000864" stroke-width="4" opacity="0.15"/>
                    <line x1="840" y1="260" x2="850" y2="260" stroke="#000864" stroke-width="4" opacity="0.12"/>
                    <text x="1100" y="400" font-family="'Noto Sans',sans-serif" font-size="40" font-weight="800" fill="#000864" opacity="0.06">?</text>
                    <circle cx="700" cy="500" r="3" fill="#000864" opacity="0.1"/>
                    <circle cx="1000" cy="600" r="4" fill="#00AFF0" opacity="0.08"/>
                    <circle cx="1250" cy="300" r="3" fill="#000864" opacity="0.08"/>
                </svg>
            </div>
            <div class="problems-inner" style="position: relative; z-index: 2;">
                <div class="section-header">
                    <h2 class="section-title">The Warehouse Chaos Problem</h2>
                    <p class="section-subtitle">Sound familiar? Every station has its own nightmare.</p>
                </div>
    
                <div class="problems-grid">
                    
                    <div class="problem-card">
                        <div class="problem-icon">
                            <svg aria-hidden="true" viewBox="0 0 24 24"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h4l3 3v5h-7V8z"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                        </div>
                        <div class="problem-card-station">Purchase &amp; Arrival</div>
                        <h3 class="problem-title">"It's Here But Not in the System"</h3>
                        <p class="problem-desc">Purchase orders arrive but receiving is manual — paper logs, miscounts, delayed PO matching. Materials sit on the dock while item data hasn't updated.</p>
                    </div>
                    
                    <div class="problem-card">
                        <div class="problem-icon">
                            <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M3 3v18h18"/><path d="M18.7 14l-5.1-5.2-2.8 2.7L7 7.7"/></svg>
                        </div>
                        <div class="problem-card-station">Inventory</div>
                        <h3 class="problem-title">"System Says 500, Shelf Says 340"</h3>
                        <p class="problem-desc">Physical counts vs. system counts are always different. Year-end reconciliation becomes a nightmare that takes the whole team.</p>
                    </div>
                    
                    <div class="problem-card">
                        <div class="problem-icon">
                            <svg aria-hidden="true" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><path d="M11 8v6"/></svg>
                        </div>
                        <div class="problem-card-station">Picking</div>
                        <h3 class="problem-title">"Wrong Part — They Look the Same"</h3>
                        <p class="problem-desc">Picking errors caused by similar specifications. Visual similarity is not a picking system. Costs you customer trust and expensive returns.</p>
                    </div>
                    
                    <div class="problem-card">
                        <div class="problem-icon">
                            <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                        </div>
                        <div class="problem-card-station">Quality Inspection</div>
                        <h3 class="problem-title">"Where's That QC Report?"</h3>
                        <p class="problem-desc">Quality checks happen in a black box — no visibility into inspection status or pass rates until it's too late. Materials sit in limbo between receiving and storage.</p>
                    </div>
                    
                    <div class="problem-card">
                        <div class="problem-icon">
                            <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
                        </div>
                        <div class="problem-card-station">Packing &amp; Shipping</div>
                        <h3 class="problem-title">"We Shipped the Wrong One Again"</h3>
                        <p class="problem-desc">Packing is error-prone without system guidance — wrong items, wrong quantities, missed shipments. Customers get the wrong item, you eat the return cost.</p>
                    </div>
                    
                    <div class="problem-card">
                        <div class="problem-icon">
                            <svg aria-hidden="true" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                        </div>
                        <div class="problem-card-station">Stock Rotation</div>
                        <h3 class="problem-title">"FIFO? We Try..."</h3>
                        <p class="problem-desc">First-in-first-out is the rule. Reality: oldest stock hides in the back while new stock gets picked first. Expired inventory discovered too late.</p>
                    </div>
                </div>
            </div>
    </div>
    `;

  return base.wrapInDiviSection('Problems', html, 'Problems: Content');
}

// ════════════════════════════════════════════════════════════════
// CSS
// ════════════════════════════════════════════════════════════════
function css() {
  return `
/* === PROBLEMS (S3) === */
/* TODO: Review and remap class selectors to use ${P} prefix */
/* TODO: Add section container: .problems-section{...;${base.fontSmoothingReset(P)}font-size:16px} */
.problems-section {
            padding: 100px 0;
            background: #ffffff;
        }
.problems-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }
.problems-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }
.problem-card {
            background: #ffffff;
            border-radius: 16px;
            padding: 32px;
            border: 2px solid #fee2e2;
            text-align: center;
            transition: border-color 0.3s ease;
        }
.problem-card:hover {
            border-color: #00AFF0;
        }
.problem-card-station {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #00AFF0;
            margin-bottom: 8px;
        
            line-height: 17.6px !important;

            -webkit-font-smoothing: auto !important;

            line-height: 17.6px !important;
            -webkit-font-smoothing: auto !important;
            line-height: 17.6px !important;
            -webkit-font-smoothing: auto !important;}
.problem-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }
.problem-icon svg {
            width: 28px;
            height: 28px;
            stroke: #dc2626;
            stroke-width: 1.5;
            fill: none;
        }
.problem-title {
            font-family: 'Noto Sans', sans-serif;
            font-size: 18px;
            font-weight: 600;
            color: #000864;
            margin-bottom: 12px;
        
            -webkit-font-smoothing: auto !important;

            -webkit-font-smoothing: auto !important;
            -webkit-font-smoothing: auto !important;}
.problem-desc {
            font-family: 'Noto Sans', sans-serif;
            font-size: 15px;
            color: #5b6b80;
            line-height: 1.6;
        
            -webkit-font-smoothing: auto !important;

            -webkit-font-smoothing: auto !important;
            -webkit-font-smoothing: auto !important;}
@media (max-width: 1024px) {
            .problems-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .capabilities-grid {
                grid-template-columns: 1fr;
                max-width: 600px;
                margin: 0 auto;
            }
            .mobile-modules-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .process-stream {
                flex-direction: column;
                align-items: flex-start;
            }
            .process-stream-steps {
                width: 100%;
            }
            .transformation-table {
                display: block;
                overflow-x: auto;
            }
            .step-reduction-grid {
                grid-template-columns: 1fr;
                max-width: 500px;
                margin: 0 auto;
            }
            .integration-visual {
                flex-direction: column;
            }
            .integration-arrow {
                transform: rotate(90deg);
                padding: 8px 0;
            }
        }
@media (max-width: 640px) {
            .wms-hero {
                padding: 120px 0 60px;
            }
            .wms-hero h1 {
                font-size: 32px;
            }
            .problems-grid {
                grid-template-columns: 1fr;
                max-width: 400px;
                margin: 0 auto;
            }
            .mobile-modules-grid {
                grid-template-columns: 1fr;
                max-width: 360px;
                margin: 0 auto;
            }
            .step-reduction-columns {
                grid-template-columns: 1fr;
            }
            .step-number {
                font-size: 36px;
            }
        }
@media (prefers-reduced-motion: reduce) {
            .capability-box,
            .integration-node,
            .integration-link,
            .problem-card,
            .mobile-module,
            .dw-d-bg,
            .dw-d-parallax,
            .dw-wave-flow,
            .dw-d-glow {
                animation: none !important;
                transition: none !important;
            }
        }

.section-header{text-align:center;margin-bottom:48px}
.section-title{font-family:'Noto Sans', sans-serif;font-size:36px;font-weight:700;color:#000864;margin-bottom:16px}
/* .section-subtitle{font-family:'Noto Sans', sans-serif;font-size:18px;color:#5b6b80;max-width:600px;margin:0 auto
            line-height: 28.8px;

            -webkit-font-smoothing: auto;
} */
@media (max-width:640px){.section-title{font-size:28px}.capabilities-grid{grid-template-columns:1fr;max-width:360px;margin-left:auto;margin-right:auto}.product-detail-cta-title{font-size:28px}.product-detail-cta-buttons{flex-direction:column}.product-detail-cta-buttons .btn-white,.product-detail-cta-buttons .btn-outline-white{width:100%;text-align:center}}

\
/* Defensive SVG sizing */
svg:not([width]):not([class]){max-width:48px;max-height:48px}
${base.reducedMotion('')}

/* Super D decoration */
${superD.css('dw-d-bg', { variant: 'outline', position: 'right', modifiers: ['glow'] })}
`.trim();
}

module.exports = { blocks, css };
